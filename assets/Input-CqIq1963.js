const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/InputsWithValue-BnToI9SD.js","assets/index-DK97D4BR.js","assets/index-BnsgsSnD.css"])))=>i.map(i=>d[i]);
import{r as u,j as s,T as x,L as j,e as v,_ as g,A as y,d as f,a as E,n as C}from"./index-DK97D4BR.js";import{T as B}from"./Title-BSmW3SQs.js";const T=u.createContext(null),m={didCatch:!1,error:null};class k extends u.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=m}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(e!==null){for(var n,r,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];(n=(r=this.props).onReset)===null||n===void 0||n.call(r,{args:i,reason:"imperative-api"}),this.setState(m)}}componentDidCatch(e,n){var r,a;(r=(a=this.props).onError)===null||r===void 0||r.call(a,e,n)}componentDidUpdate(e,n){const{didCatch:r}=this.state,{resetKeys:a}=this.props;if(r&&n.error!==null&&b(e.resetKeys,a)){var i,o;(i=(o=this.props).onReset)===null||i===void 0||i.call(o,{next:a,prev:e.resetKeys,reason:"keys"}),this.setState(m)}}render(){const{children:e,fallbackRender:n,FallbackComponent:r,fallback:a}=this.props,{didCatch:i,error:o}=this.state;let c=e;if(i){const d={error:o,resetErrorBoundary:this.resetErrorBoundary};if(typeof n=="function")c=n(d);else if(r)c=u.createElement(r,d);else if(a!==void 0)c=a;else throw o}return u.createElement(T.Provider,{value:{didCatch:i,error:o,resetErrorBoundary:this.resetErrorBoundary}},c)}}function b(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return t.length!==e.length||t.some((n,r)=>!Object.is(n,e[r]))}function I({array:t}){return s.jsx("div",{className:"flex flex-col text-center margin-top-80px",children:t.map(e=>s.jsxs(x,{children:[e.text," ",s.jsx(j,{to:e.link,className:"link-color",viewTransition:!0,children:e.linkText})]},e.linkText))})}function S({array:t}){return t.map(e=>{const n=e.component,r={...e};return delete r.component,s.jsx(n,{...r},r.id)})}const F=u.lazy(()=>g(()=>import("./InputsWithValue-BnToI9SD.js"),__vite__mapDeps([0,1,2])));function l({action:t,className:e="",linksUnderFormArray:n,formTitle:r="",inputsArray:a=[],buttonText:i="",navigateOnSuccess:o=!1,shouldInputsHaveValue:c=!1}){return s.jsx(k,{fallback:s.jsx("p",{children:"Произошла ошибка"}),children:s.jsxs(l.Form,{navigateOnSuccess:o,action:t,className:e,children:[s.jsxs(l.Wrapper,{children:[r&&s.jsx(l.Header,{title:r}),c?s.jsx(u.Suspense,{fallback:s.jsx(v,{}),children:s.jsx(F,{array:a})}):s.jsx(l.Inputs,{array:a}),s.jsx(l.Button,{children:i})]}),n&&s.jsx(l.Links,{array:n})]})})}function L({children:t}){const{pending:e}=y.useFormStatus();return s.jsx(f.Button,{htmlType:"submit",size:"medium",disabled:e,children:e?"Отправляем...":t})}function D({children:t}){return s.jsx("div",{className:"flex flex-col gap-one-half justify-center items-center",children:t})}function W({title:t}){return s.jsx(B,{as:"h3",children:t})}function w({children:t,action:e,navigateOnSuccess:n,className:r}){const a=E(),i=C(),[o,c]=u.useState(null);return s.jsxs("form",{action:async d=>{c(null);try{const{type:h,payload:p}=await a(e(d));if(h.includes("rejected")){c(String(p));return}n&&i(n)}catch(h){c("Возникла ошибка при отправке данных: "+h.message)}},className:r,children:[t,o&&s.jsxs(x,{extraClass:"red text-center",children:["Возникла ошибка: ",o]})]})}l.Button=L;l.Wrapper=D;l.Header=W;l.Form=w;l.Inputs=u.memo(S);l.Links=u.memo(I);function A(t){const[e,n]=u.useState(t.value??"");return s.jsx(f.Input,{...t,onChange:r=>n(r.target.value),onBlur:r=>{!(r!=null&&r.target.value)&&t.value&&n(t.value)},value:e,errorText:t.errorText,size:t.size??"default",icon:e&&e!==t.value?"CloseIcon":void 0,onIconClick:()=>{n(t.value??"")}})}export{l as F,A as I};
